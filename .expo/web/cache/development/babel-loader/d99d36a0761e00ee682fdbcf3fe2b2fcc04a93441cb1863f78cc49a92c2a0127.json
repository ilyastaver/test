{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _error = require(\"./error\");\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar Storage = function () {\n  function Storage() {\n    var _this = this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Storage);\n    this._SIZE = options.size || 1000;\n    this.sync = options.sync || {};\n    this.defaultExpires = options.defaultExpires !== undefined ? options.defaultExpires : 1000 * 3600 * 24;\n    this.enableCache = options.enableCache !== false;\n    this._s = options.storageBackend || null;\n    this._innerVersion = 11;\n    this.cache = {};\n    if (this._s && this._s.setItem) {\n      try {\n        var promiseTest = this._s.setItem('__react_native_storage_test', 'test');\n        this.isPromise = !!(promiseTest && promiseTest.then);\n      } catch (e) {\n        console.warn(e);\n        delete this._s;\n        throw e;\n      }\n    } else {\n      console.warn('Data would be lost after reload cause there is no storageBackend specified!\\n      \\nEither use localStorage(for web) or AsyncStorage(for React Native) as a storageBackend.');\n    }\n    this._mapPromise = this.getItem('map').then(function (map) {\n      _this._m = _this._checkMap(map && JSON.parse(map) || {});\n    });\n  }\n  _createClass(Storage, [{\n    key: 'getItem',\n    value: function getItem(key) {\n      return this._s ? this.isPromise ? this._s.getItem(key) : Promise.resolve(this._s.getItem(key)) : Promise.resolve();\n    }\n  }, {\n    key: 'setItem',\n    value: function setItem(key, value) {\n      return this._s ? this.isPromise ? this._s.setItem(key, value) : Promise.resolve(this._s.setItem(key, value)) : Promise.resolve();\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem(key) {\n      return this._s ? this.isPromise ? this._s.removeItem(key) : Promise.resolve(this._s.removeItem(key)) : Promise.resolve();\n    }\n  }, {\n    key: '_initMap',\n    value: function _initMap() {\n      return {\n        innerVersion: this._innerVersion,\n        index: 0,\n        __keys__: {}\n      };\n    }\n  }, {\n    key: '_checkMap',\n    value: function _checkMap(map) {\n      if (map && map.innerVersion && map.innerVersion === this._innerVersion) {\n        return map;\n      } else {\n        return this._initMap();\n      }\n    }\n  }, {\n    key: '_getId',\n    value: function _getId(key, id) {\n      return key + '_' + id;\n    }\n  }, {\n    key: '_saveToMap',\n    value: function _saveToMap(params) {\n      var key = params.key,\n        id = params.id,\n        data = params.data,\n        newId = this._getId(key, id),\n        m = this._m;\n      if (m[newId] !== undefined) {\n        if (this.enableCache) this.cache[newId] = JSON.parse(data);\n        return this.setItem('map_' + m[newId], data);\n      }\n      if (m[m.index] !== undefined) {\n        var oldId = m[m.index];\n        var splitOldId = oldId.split('_');\n        delete m[oldId];\n        this._removeIdInKey(splitOldId[0], splitOldId[1]);\n        if (this.enableCache) {\n          delete this.cache[oldId];\n        }\n      }\n      m[newId] = m.index;\n      m[m.index] = newId;\n      m.__keys__[key] = m.__keys__[key] || [];\n      m.__keys__[key].push(id);\n      if (this.enableCache) {\n        var cacheData = JSON.parse(data);\n        this.cache[newId] = cacheData;\n      }\n      var currentIndex = m.index;\n      if (++m.index === this._SIZE) {\n        m.index = 0;\n      }\n      this.setItem('map_' + currentIndex, data);\n      this.setItem('map', JSON.stringify(m));\n    }\n  }, {\n    key: 'save',\n    value: function save(params) {\n      var _this2 = this;\n      var key = params.key,\n        id = params.id,\n        data = params.data,\n        rawData = params.rawData,\n        _params$expires = params.expires,\n        expires = _params$expires === undefined ? this.defaultExpires : _params$expires;\n      if (key.toString().indexOf('_') !== -1) {\n        console.error('Please do not use \"_\" in key!');\n      }\n      var dataToSave = {\n        rawData: data\n      };\n      if (data === undefined) {\n        if (rawData !== undefined) {\n          console.warn('\"rawData\" is deprecated, please use \"data\" instead!');\n          dataToSave.rawData = rawData;\n        } else {\n          console.error('\"data\" is required in save()!');\n          return;\n        }\n      }\n      var now = new Date().getTime();\n      if (expires !== null) {\n        dataToSave.expires = now + expires;\n      }\n      dataToSave = JSON.stringify(dataToSave);\n      if (id === undefined) {\n        if (this.enableCache) {\n          var cacheData = JSON.parse(dataToSave);\n          this.cache[key] = cacheData;\n        }\n        return this.setItem(key, dataToSave);\n      } else {\n        if (id.toString().indexOf('_') !== -1) {\n          console.error('Please do not use \"_\" in id!');\n        }\n        return this._mapPromise.then(function () {\n          return _this2._saveToMap({\n            key: key,\n            id: id,\n            data: dataToSave\n          });\n        });\n      }\n    }\n  }, {\n    key: 'getBatchData',\n    value: function getBatchData(querys) {\n      var tasks = [];\n      for (var i = 0, query; query = querys[i]; i++) {\n        tasks[i] = this.load(query);\n      }\n      return Promise.all(tasks);\n    }\n  }, {\n    key: 'getBatchDataWithIds',\n    value: function getBatchDataWithIds(params) {\n      var _this3 = this;\n      var key = params.key,\n        ids = params.ids,\n        syncInBackground = params.syncInBackground;\n      return Promise.all(ids.map(function (id) {\n        return _this3.load({\n          key: key,\n          id: id,\n          syncInBackground: syncInBackground,\n          autoSync: false,\n          batched: true\n        });\n      })).then(function (results) {\n        return new Promise(function (resolve, reject) {\n          var ids = results.filter(function (value) {\n            return value.syncId !== undefined;\n          });\n          if (!ids.length) {\n            return resolve();\n          }\n          return _this3.sync[key]({\n            id: ids.map(function (value) {\n              return value.syncId;\n            }),\n            resolve: resolve,\n            reject: reject\n          });\n        }).then(function (data) {\n          return results.map(function (value) {\n            return value.syncId ? data.shift() : value;\n          });\n        });\n      });\n    }\n  }, {\n    key: '_lookupGlobalItem',\n    value: function _lookupGlobalItem(params) {\n      var _this4 = this;\n      var ret = void 0;\n      var key = params.key;\n      if (this.enableCache && this.cache[key] !== undefined) {\n        ret = this.cache[key];\n        return this._loadGlobalItem(_extends({\n          ret: ret\n        }, params));\n      }\n      return this.getItem(key).then(function (ret) {\n        return _this4._loadGlobalItem(_extends({\n          ret: ret\n        }, params));\n      });\n    }\n  }, {\n    key: '_loadGlobalItem',\n    value: function _loadGlobalItem(params) {\n      var _this5 = this;\n      var key = params.key,\n        ret = params.ret,\n        autoSync = params.autoSync,\n        syncInBackground = params.syncInBackground,\n        syncParams = params.syncParams;\n      if (ret === null || ret === undefined) {\n        if (autoSync && this.sync[key]) {\n          return new Promise(function (resolve, reject) {\n            return _this5.sync[key]({\n              resolve: resolve,\n              reject: reject,\n              syncParams: syncParams\n            });\n          });\n        }\n        return Promise.reject(new _error.NotFoundError(JSON.stringify(params)));\n      }\n      if (typeof ret === 'string') {\n        ret = JSON.parse(ret);\n        if (this.enableCache) {\n          this.cache[key] = ret;\n        }\n      }\n      var now = new Date().getTime();\n      if (ret.expires < now) {\n        if (autoSync && this.sync[key]) {\n          if (syncInBackground) {\n            this.sync[key]({\n              syncParams: syncParams\n            });\n            return Promise.resolve(ret.rawData);\n          }\n          return new Promise(function (resolve, reject) {\n            return _this5.sync[key]({\n              resolve: resolve,\n              reject: reject,\n              syncParams: syncParams\n            });\n          });\n        }\n        return Promise.reject(new _error.ExpiredError(JSON.stringify(params)));\n      }\n      return Promise.resolve(ret.rawData);\n    }\n  }, {\n    key: '_noItemFound',\n    value: function _noItemFound(params) {\n      var _this6 = this;\n      var key = params.key,\n        id = params.id,\n        autoSync = params.autoSync,\n        syncParams = params.syncParams;\n      if (this.sync[key]) {\n        if (autoSync) {\n          return new Promise(function (resolve, reject) {\n            return _this6.sync[key]({\n              id: id,\n              syncParams: syncParams,\n              resolve: resolve,\n              reject: reject\n            });\n          });\n        }\n        return Promise.resolve({\n          syncId: id\n        });\n      }\n      return Promise.reject(new _error.NotFoundError(JSON.stringify(params)));\n    }\n  }, {\n    key: '_loadMapItem',\n    value: function _loadMapItem(params) {\n      var _this7 = this;\n      var ret = params.ret,\n        key = params.key,\n        id = params.id,\n        autoSync = params.autoSync,\n        batched = params.batched,\n        syncInBackground = params.syncInBackground,\n        syncParams = params.syncParams;\n      if (ret === null || ret === undefined) {\n        return this._noItemFound(params);\n      }\n      if (typeof ret === 'string') {\n        ret = JSON.parse(ret);\n        var _key = params.key,\n          _id = params.id;\n        var newId = this._getId(_key, _id);\n        if (this.enableCache) {\n          this.cache[newId] = ret;\n        }\n      }\n      var now = new Date().getTime();\n      if (ret.expires < now) {\n        if (autoSync && this.sync[key]) {\n          if (syncInBackground) {\n            this.sync[key]({\n              id: id,\n              syncParams: syncParams\n            });\n            return Promise.resolve(ret.rawData);\n          }\n          return new Promise(function (resolve, reject) {\n            return _this7.sync[key]({\n              id: id,\n              resolve: resolve,\n              reject: reject,\n              syncParams: syncParams\n            });\n          });\n        }\n        if (batched) {\n          return Promise.resolve({\n            syncId: id\n          });\n        }\n        return Promise.reject(new _error.ExpiredError(JSON.stringify(params)));\n      }\n      return Promise.resolve(ret.rawData);\n    }\n  }, {\n    key: '_lookUpInMap',\n    value: function _lookUpInMap(params) {\n      var _this8 = this;\n      var m = this._m,\n        ret = void 0;\n      var key = params.key,\n        id = params.id;\n      var newId = this._getId(key, id);\n      if (this.enableCache && this.cache[newId]) {\n        ret = this.cache[newId];\n        return this._loadMapItem(_extends({\n          ret: ret\n        }, params));\n      }\n      if (m[newId] !== undefined) {\n        return this.getItem('map_' + m[newId]).then(function (ret) {\n          return _this8._loadMapItem(_extends({\n            ret: ret\n          }, params));\n        });\n      }\n      return this._noItemFound(_extends({\n        ret: ret\n      }, params));\n    }\n  }, {\n    key: 'remove',\n    value: function remove(params) {\n      var _this9 = this;\n      return this._mapPromise.then(function () {\n        var m = _this9._m;\n        var key = params.key,\n          id = params.id;\n        if (id === undefined) {\n          if (_this9.enableCache && _this9.cache[key]) {\n            delete _this9.cache[key];\n          }\n          return _this9.removeItem(key);\n        }\n        var newId = _this9._getId(key, id);\n        if (m[newId] !== undefined) {\n          if (_this9.enableCache && _this9.cache[newId]) {\n            delete _this9.cache[newId];\n          }\n          _this9._removeIdInKey(key, id);\n          var idTobeDeleted = m[newId];\n          delete m[newId];\n          _this9.setItem('map', JSON.stringify(m));\n          return _this9.removeItem('map_' + idTobeDeleted);\n        }\n      });\n    }\n  }, {\n    key: '_removeIdInKey',\n    value: function _removeIdInKey(key, id) {\n      var indexTobeRemoved = (this._m.__keys__[key] || []).indexOf(id);\n      if (indexTobeRemoved !== -1) {\n        this._m.__keys__[key].splice(indexTobeRemoved, 1);\n      }\n    }\n  }, {\n    key: 'load',\n    value: function load(params) {\n      var _this10 = this;\n      var key = params.key,\n        id = params.id,\n        _params$autoSync = params.autoSync,\n        autoSync = _params$autoSync === undefined ? true : _params$autoSync,\n        _params$syncInBackgro = params.syncInBackground,\n        syncInBackground = _params$syncInBackgro === undefined ? true : _params$syncInBackgro,\n        syncParams = params.syncParams;\n      return this._mapPromise.then(function () {\n        return new Promise(function (resolve, reject) {\n          if (id === undefined) {\n            return resolve(_this10._lookupGlobalItem({\n              key: key,\n              resolve: resolve,\n              reject: reject,\n              autoSync: autoSync,\n              syncInBackground: syncInBackground,\n              syncParams: syncParams\n            }));\n          }\n          return resolve(_this10._lookUpInMap({\n            key: key,\n            id: id,\n            resolve: resolve,\n            reject: reject,\n            autoSync: autoSync,\n            syncInBackground: syncInBackground,\n            syncParams: syncParams\n          }));\n        });\n      });\n    }\n  }, {\n    key: 'clearMap',\n    value: function clearMap() {\n      var _this11 = this;\n      this.removeItem('map').then(function () {\n        _this11._m = _this11._initMap();\n      });\n    }\n  }, {\n    key: 'clearMapForKey',\n    value: function clearMapForKey(key) {\n      var _this12 = this;\n      return this._mapPromise.then(function () {\n        var tasks = (_this12._m.__keys__[key] || []).map(function (id) {\n          return _this12.remove({\n            key: key,\n            id: id\n          });\n        });\n        return Promise.all(tasks);\n      });\n    }\n  }, {\n    key: 'getIdsForKey',\n    value: function getIdsForKey(key) {\n      var _this13 = this;\n      return this._mapPromise.then(function () {\n        return _this13._m.__keys__[key] || [];\n      });\n    }\n  }, {\n    key: 'getAllDataForKey',\n    value: function getAllDataForKey(key, options) {\n      var _this14 = this;\n      options = Object.assign({\n        syncInBackground: true\n      }, options);\n      return this.getIdsForKey(key).then(function (ids) {\n        var querys = ids.map(function (id) {\n          return {\n            key: key,\n            id: id,\n            syncInBackground: options.syncInBackground\n          };\n        });\n        return _this14.getBatchData(querys);\n      });\n    }\n  }]);\n  return Storage;\n}();\nexports.default = Storage;","map":{"version":3,"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_error","require","_classCallCheck","instance","TypeError","Storage","_this","options","undefined","_SIZE","size","sync","defaultExpires","enableCache","_s","storageBackend","_innerVersion","cache","setItem","promiseTest","isPromise","then","e","console","warn","_mapPromise","getItem","map","_m","_checkMap","JSON","parse","Promise","resolve","removeItem","_initMap","innerVersion","index","__keys__","_getId","id","_saveToMap","params","data","newId","m","oldId","splitOldId","split","_removeIdInKey","push","cacheData","currentIndex","stringify","save","_this2","rawData","_params$expires","expires","toString","indexOf","error","dataToSave","now","Date","getTime","getBatchData","querys","tasks","query","load","all","getBatchDataWithIds","_this3","ids","syncInBackground","autoSync","batched","results","reject","filter","syncId","shift","_lookupGlobalItem","_this4","ret","_loadGlobalItem","_this5","syncParams","NotFoundError","ExpiredError","_noItemFound","_this6","_loadMapItem","_this7","_key","_id","_lookUpInMap","_this8","remove","_this9","idTobeDeleted","indexTobeRemoved","splice","_this10","_params$autoSync","_params$syncInBackgro","clearMap","_this11","clearMapForKey","_this12","getIdsForKey","_this13","getAllDataForKey","_this14","default"],"sources":["C:/Users/ilias/OneDrive/Рабочий стол/messenger_project/Application/Client/node_modules/react-native-web-storage/distribution/storage.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  local storage(web/react native) wrapper\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  sunnylqm 2017-04-20\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *  version 0.2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _error = require('./error');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Storage = function () {\n  function Storage() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Storage);\n\n    this._SIZE = options.size || 1000; // maximum capacity\n    this.sync = options.sync || {}; // remote sync method\n    this.defaultExpires = options.defaultExpires !== undefined ? options.defaultExpires : 1000 * 3600 * 24;\n    this.enableCache = options.enableCache !== false;\n    this._s = options.storageBackend || null;\n    this._innerVersion = 11;\n    this.cache = {};\n\n    if (this._s && this._s.setItem) {\n      try {\n        var promiseTest = this._s.setItem('__react_native_storage_test', 'test');\n        this.isPromise = !!(promiseTest && promiseTest.then);\n      } catch (e) {\n        console.warn(e);\n        delete this._s;\n        throw e;\n      }\n    } else {\n      console.warn('Data would be lost after reload cause there is no storageBackend specified!\\n      \\nEither use localStorage(for web) or AsyncStorage(for React Native) as a storageBackend.');\n    }\n\n    this._mapPromise = this.getItem('map').then(function (map) {\n      _this._m = _this._checkMap(map && JSON.parse(map) || {});\n      // delete this._mapPromise;\n    });\n  }\n\n  _createClass(Storage, [{\n    key: 'getItem',\n    value: function getItem(key) {\n      return this._s ? this.isPromise ? this._s.getItem(key) : Promise.resolve(this._s.getItem(key)) : Promise.resolve();\n    }\n  }, {\n    key: 'setItem',\n    value: function setItem(key, value) {\n      return this._s ? this.isPromise ? this._s.setItem(key, value) : Promise.resolve(this._s.setItem(key, value)) : Promise.resolve();\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem(key) {\n      return this._s ? this.isPromise ? this._s.removeItem(key) : Promise.resolve(this._s.removeItem(key)) : Promise.resolve();\n    }\n  }, {\n    key: '_initMap',\n    value: function _initMap() {\n      return {\n        innerVersion: this._innerVersion,\n        index: 0,\n        __keys__: {}\n      };\n    }\n  }, {\n    key: '_checkMap',\n    value: function _checkMap(map) {\n      if (map && map.innerVersion && map.innerVersion === this._innerVersion) {\n        return map;\n      } else {\n        return this._initMap();\n      }\n    }\n  }, {\n    key: '_getId',\n    value: function _getId(key, id) {\n      return key + '_' + id;\n    }\n  }, {\n    key: '_saveToMap',\n    value: function _saveToMap(params) {\n      var key = params.key,\n          id = params.id,\n          data = params.data,\n          newId = this._getId(key, id),\n          m = this._m;\n\n      if (m[newId] !== undefined) {\n        //update existed data\n        if (this.enableCache) this.cache[newId] = JSON.parse(data);\n        return this.setItem('map_' + m[newId], data);\n      }\n      if (m[m.index] !== undefined) {\n        //loop over, delete old data\n        var oldId = m[m.index];\n        var splitOldId = oldId.split('_');\n        delete m[oldId];\n        this._removeIdInKey(splitOldId[0], splitOldId[1]);\n        if (this.enableCache) {\n          delete this.cache[oldId];\n        }\n      }\n      m[newId] = m.index;\n      m[m.index] = newId;\n\n      m.__keys__[key] = m.__keys__[key] || [];\n      m.__keys__[key].push(id);\n\n      if (this.enableCache) {\n        var cacheData = JSON.parse(data);\n        this.cache[newId] = cacheData;\n      }\n      var currentIndex = m.index;\n      if (++m.index === this._SIZE) {\n        m.index = 0;\n      }\n      this.setItem('map_' + currentIndex, data);\n      this.setItem('map', JSON.stringify(m));\n    }\n  }, {\n    key: 'save',\n    value: function save(params) {\n      var _this2 = this;\n\n      var key = params.key,\n          id = params.id,\n          data = params.data,\n          rawData = params.rawData,\n          _params$expires = params.expires,\n          expires = _params$expires === undefined ? this.defaultExpires : _params$expires;\n\n      if (key.toString().indexOf('_') !== -1) {\n        console.error('Please do not use \"_\" in key!');\n      }\n      var dataToSave = { rawData: data };\n      if (data === undefined) {\n        if (rawData !== undefined) {\n          console.warn('\"rawData\" is deprecated, please use \"data\" instead!');\n          dataToSave.rawData = rawData;\n        } else {\n          console.error('\"data\" is required in save()!');\n          return;\n        }\n      }\n      var now = new Date().getTime();\n      if (expires !== null) {\n        dataToSave.expires = now + expires;\n      }\n      dataToSave = JSON.stringify(dataToSave);\n      if (id === undefined) {\n        if (this.enableCache) {\n          var cacheData = JSON.parse(dataToSave);\n          this.cache[key] = cacheData;\n        }\n        return this.setItem(key, dataToSave);\n      } else {\n        if (id.toString().indexOf('_') !== -1) {\n          console.error('Please do not use \"_\" in id!');\n        }\n        return this._mapPromise.then(function () {\n          return _this2._saveToMap({\n            key: key,\n            id: id,\n            data: dataToSave\n          });\n        });\n      }\n    }\n  }, {\n    key: 'getBatchData',\n    value: function getBatchData(querys) {\n      var tasks = [];\n      for (var i = 0, query; query = querys[i]; i++) {\n        tasks[i] = this.load(query);\n      }\n      return Promise.all(tasks);\n    }\n  }, {\n    key: 'getBatchDataWithIds',\n    value: function getBatchDataWithIds(params) {\n      var _this3 = this;\n\n      var key = params.key,\n          ids = params.ids,\n          syncInBackground = params.syncInBackground;\n\n\n      return Promise.all(ids.map(function (id) {\n        return _this3.load({ key: key, id: id, syncInBackground: syncInBackground, autoSync: false, batched: true });\n      })).then(function (results) {\n        return new Promise(function (resolve, reject) {\n          var ids = results.filter(function (value) {\n            return value.syncId !== undefined;\n          });\n          if (!ids.length) {\n            return resolve();\n          }\n          return _this3.sync[key]({\n            id: ids.map(function (value) {\n              return value.syncId;\n            }),\n            resolve: resolve,\n            reject: reject\n          });\n        }).then(function (data) {\n          return results.map(function (value) {\n            return value.syncId ? data.shift() : value;\n          });\n        });\n      });\n    }\n  }, {\n    key: '_lookupGlobalItem',\n    value: function _lookupGlobalItem(params) {\n      var _this4 = this;\n\n      var ret = void 0;\n      var key = params.key;\n\n      if (this.enableCache && this.cache[key] !== undefined) {\n        ret = this.cache[key];\n        return this._loadGlobalItem(_extends({ ret: ret }, params));\n      }\n      return this.getItem(key).then(function (ret) {\n        return _this4._loadGlobalItem(_extends({ ret: ret }, params));\n      });\n    }\n  }, {\n    key: '_loadGlobalItem',\n    value: function _loadGlobalItem(params) {\n      var _this5 = this;\n\n      var key = params.key,\n          ret = params.ret,\n          autoSync = params.autoSync,\n          syncInBackground = params.syncInBackground,\n          syncParams = params.syncParams;\n\n      if (ret === null || ret === undefined) {\n        if (autoSync && this.sync[key]) {\n          return new Promise(function (resolve, reject) {\n            return _this5.sync[key]({ resolve: resolve, reject: reject, syncParams: syncParams });\n          });\n        }\n        return Promise.reject(new _error.NotFoundError(JSON.stringify(params)));\n      }\n      if (typeof ret === 'string') {\n        ret = JSON.parse(ret);\n        if (this.enableCache) {\n          this.cache[key] = ret;\n        }\n      }\n      var now = new Date().getTime();\n      if (ret.expires < now) {\n        if (autoSync && this.sync[key]) {\n          if (syncInBackground) {\n            this.sync[key]({ syncParams: syncParams });\n            return Promise.resolve(ret.rawData);\n          }\n          return new Promise(function (resolve, reject) {\n            return _this5.sync[key]({ resolve: resolve, reject: reject, syncParams: syncParams });\n          });\n        }\n        return Promise.reject(new _error.ExpiredError(JSON.stringify(params)));\n      }\n      return Promise.resolve(ret.rawData);\n    }\n  }, {\n    key: '_noItemFound',\n    value: function _noItemFound(params) {\n      var _this6 = this;\n\n      var key = params.key,\n          id = params.id,\n          autoSync = params.autoSync,\n          syncParams = params.syncParams;\n\n      if (this.sync[key]) {\n        if (autoSync) {\n          return new Promise(function (resolve, reject) {\n            return _this6.sync[key]({ id: id, syncParams: syncParams, resolve: resolve, reject: reject });\n          });\n        }\n        return Promise.resolve({ syncId: id });\n      }\n      return Promise.reject(new _error.NotFoundError(JSON.stringify(params)));\n    }\n  }, {\n    key: '_loadMapItem',\n    value: function _loadMapItem(params) {\n      var _this7 = this;\n\n      var ret = params.ret,\n          key = params.key,\n          id = params.id,\n          autoSync = params.autoSync,\n          batched = params.batched,\n          syncInBackground = params.syncInBackground,\n          syncParams = params.syncParams;\n\n      if (ret === null || ret === undefined) {\n        return this._noItemFound(params);\n      }\n      if (typeof ret === 'string') {\n        ret = JSON.parse(ret);\n        var _key = params.key,\n            _id = params.id;\n\n        var newId = this._getId(_key, _id);\n        if (this.enableCache) {\n          this.cache[newId] = ret;\n        }\n      }\n      var now = new Date().getTime();\n      if (ret.expires < now) {\n        if (autoSync && this.sync[key]) {\n          if (syncInBackground) {\n            this.sync[key]({ id: id, syncParams: syncParams });\n            return Promise.resolve(ret.rawData);\n          }\n          return new Promise(function (resolve, reject) {\n            return _this7.sync[key]({ id: id, resolve: resolve, reject: reject, syncParams: syncParams });\n          });\n        }\n        if (batched) {\n          return Promise.resolve({ syncId: id });\n        }\n        return Promise.reject(new _error.ExpiredError(JSON.stringify(params)));\n      }\n      return Promise.resolve(ret.rawData);\n    }\n  }, {\n    key: '_lookUpInMap',\n    value: function _lookUpInMap(params) {\n      var _this8 = this;\n\n      var m = this._m,\n          ret = void 0;\n      var key = params.key,\n          id = params.id;\n\n      var newId = this._getId(key, id);\n      if (this.enableCache && this.cache[newId]) {\n        ret = this.cache[newId];\n        return this._loadMapItem(_extends({ ret: ret }, params));\n      }\n      if (m[newId] !== undefined) {\n        return this.getItem('map_' + m[newId]).then(function (ret) {\n          return _this8._loadMapItem(_extends({ ret: ret }, params));\n        });\n      }\n      return this._noItemFound(_extends({ ret: ret }, params));\n    }\n  }, {\n    key: 'remove',\n    value: function remove(params) {\n      var _this9 = this;\n\n      return this._mapPromise.then(function () {\n        var m = _this9._m;\n        var key = params.key,\n            id = params.id;\n\n\n        if (id === undefined) {\n          if (_this9.enableCache && _this9.cache[key]) {\n            delete _this9.cache[key];\n          }\n          return _this9.removeItem(key);\n        }\n        var newId = _this9._getId(key, id);\n\n        //remove existed data\n        if (m[newId] !== undefined) {\n          if (_this9.enableCache && _this9.cache[newId]) {\n            delete _this9.cache[newId];\n          }\n          _this9._removeIdInKey(key, id);\n          var idTobeDeleted = m[newId];\n          delete m[newId];\n          _this9.setItem('map', JSON.stringify(m));\n          return _this9.removeItem('map_' + idTobeDeleted);\n        }\n      });\n    }\n  }, {\n    key: '_removeIdInKey',\n    value: function _removeIdInKey(key, id) {\n      var indexTobeRemoved = (this._m.__keys__[key] || []).indexOf(id);\n      if (indexTobeRemoved !== -1) {\n        this._m.__keys__[key].splice(indexTobeRemoved, 1);\n      }\n    }\n  }, {\n    key: 'load',\n    value: function load(params) {\n      var _this10 = this;\n\n      var key = params.key,\n          id = params.id,\n          _params$autoSync = params.autoSync,\n          autoSync = _params$autoSync === undefined ? true : _params$autoSync,\n          _params$syncInBackgro = params.syncInBackground,\n          syncInBackground = _params$syncInBackgro === undefined ? true : _params$syncInBackgro,\n          syncParams = params.syncParams;\n\n      return this._mapPromise.then(function () {\n        return new Promise(function (resolve, reject) {\n          if (id === undefined) {\n            return resolve(_this10._lookupGlobalItem({\n              key: key, resolve: resolve, reject: reject, autoSync: autoSync, syncInBackground: syncInBackground, syncParams: syncParams\n            }));\n          }\n          return resolve(_this10._lookUpInMap({\n            key: key, id: id, resolve: resolve, reject: reject, autoSync: autoSync, syncInBackground: syncInBackground, syncParams: syncParams\n          }));\n        });\n      });\n    }\n  }, {\n    key: 'clearMap',\n    value: function clearMap() {\n      var _this11 = this;\n\n      this.removeItem('map').then(function () {\n        _this11._m = _this11._initMap();\n      });\n    }\n  }, {\n    key: 'clearMapForKey',\n    value: function clearMapForKey(key) {\n      var _this12 = this;\n\n      return this._mapPromise.then(function () {\n        var tasks = (_this12._m.__keys__[key] || []).map(function (id) {\n          return _this12.remove({ key: key, id: id });\n        });\n        return Promise.all(tasks);\n      });\n    }\n  }, {\n    key: 'getIdsForKey',\n    value: function getIdsForKey(key) {\n      var _this13 = this;\n\n      return this._mapPromise.then(function () {\n        return _this13._m.__keys__[key] || [];\n      });\n    }\n  }, {\n    key: 'getAllDataForKey',\n    value: function getAllDataForKey(key, options) {\n      var _this14 = this;\n\n      options = Object.assign({ syncInBackground: true }, options);\n      return this.getIdsForKey(key).then(function (ids) {\n        var querys = ids.map(function (id) {\n          return { key: key, id: id, syncInBackground: options.syncInBackground };\n        });\n        return _this14.getBatchData(querys);\n      });\n    }\n  }]);\n\n  return Storage;\n}();\n\nexports.default = Storage;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}