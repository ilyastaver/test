{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ShowAvatar from \"../Avatar/ShowAvatar/showAvatar\";\nimport ForwardSvg from \"../../assets/icons/forwardSvg\";\nimport ForwardFocusSvg from \"../../assets/icons/forwardFocusSvg\";\nimport { MessageContext } from \"../context/MessageContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar MessageBody = function MessageBody(_ref) {\n  var data = _ref.data;\n  var imageUrl = data.imageUrl,\n    nickname = data.nickname,\n    role = data.role,\n    message = data.message,\n    own = data.own,\n    channel = data.channel;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isFocused = _useState2[0],\n    setIsFocused = _useState2[1];\n  var _useContext = useContext(MessageContext),\n    forwardedMessages = _useContext.forwardedMessages,\n    addForwardedMessage = _useContext.addForwardedMessage;\n  var date = new Date();\n  var time = date.toLocaleTimeString([], {\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n  var handleForwardPress = function handleForwardPress() {\n    setIsFocused(function (prevState) {\n      if (prevState) {\n        var updatedMessages = forwardedMessages.filter(function (msg) {\n          return msg !== message;\n        });\n        localStorage.setItem('forwardedMessages', JSON.stringify(updatedMessages));\n      } else {\n        addForwardedMessage(message);\n      }\n      return !prevState;\n    });\n  };\n  useEffect(function () {\n    var storedMessages = localStorage.getItem('forwardedMessages');\n    if (storedMessages) {\n      var parsedMessages = JSON.parse(storedMessages);\n      if (parsedMessages.includes(message)) {\n        setIsFocused(true);\n      }\n    }\n  }, []);\n  var forwardIcon = isFocused ? _jsx(ForwardFocusSvg, {}) : _jsx(ForwardSvg, {});\n  return _jsxs(View, {\n    style: own ? styles.ownContainer : styles.container,\n    children: [!own && imageUrl && _jsx(View, {\n      style: styles.avatar,\n      children: _jsx(ShowAvatar, {\n        imageUrl: imageUrl,\n        profile: false\n      })\n    }), _jsxs(View, {\n      style: [styles.messageBox, own ? styles.ownMessageBox : styles.box, {\n        borderTopRightRadius: own ? 10 : 10,\n        borderBottomRightRadius: own ? 0 : 10,\n        borderBottomLeftRadius: own ? 10 : 0\n      }],\n      children: [_jsx(TouchableOpacity, {\n        onPress: handleForwardPress,\n        children: _jsx(View, {\n          style: own ? styles.ownForward : styles.forward,\n          children: forwardIcon\n        })\n      }), _jsx(Text, {\n        style: styles.nickname,\n        children: nickname\n      }), channel && _jsx(Text, {\n        style: styles.role,\n        children: role\n      }), _jsx(Text, {\n        style: styles.message,\n        children: message\n      }), _jsx(Text, {\n        style: own ? styles.ownTime : styles.time,\n        children: time\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    marginBottom: 10,\n    maxWidth: '100%'\n  },\n  ownContainer: {\n    flexDirection: 'row-reverse',\n    alignItems: 'flex-end',\n    marginBottom: 10,\n    maxWidth: '100%'\n  },\n  avatar: {\n    alignSelf: 'flex-start',\n    marginBottom: 0\n  },\n  messageBox: {\n    backgroundColor: '#E7DEDE',\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    maxWidth: '60%',\n    marginBottom: 0\n  },\n  box: {\n    borderTopRightRadius: 10,\n    borderBottomRightRadius: 10,\n    borderTopLeftRadius: 10\n  },\n  ownMessageBox: {\n    backgroundColor: 'rgba(0, 118, 185, 0.35)',\n    paddingVertical: 10,\n    paddingHorizontal: 15,\n    maxWidth: '60%',\n    borderTopRightRadius: 10,\n    borderBottomRightRadius: 10,\n    borderTopLeftRadius: 10,\n    marginBottom: 0\n  },\n  forward: {\n    alignSelf: 'flex-end',\n    marginBottom: 5\n  },\n  ownForward: {\n    alignSelf: 'flex-start',\n    marginBottom: 5\n  },\n  nickname: {\n    fontSize: 24,\n    fontFamily: 'Montserrat-Bold',\n    fontWeight: 'bold',\n    color: 'black',\n    marginBottom: 5\n  },\n  role: {\n    fontSize: 24,\n    fontFamily: 'Montserrat-Regular',\n    color: '#0076B9',\n    marginBottom: 5\n  },\n  message: {\n    fontSize: 19,\n    fontFamily: 'Montserrat-Regular',\n    color: 'black',\n    flexWrap: 'wrap',\n    marginBottom: 5\n  },\n  time: {\n    fontSize: 14,\n    fontFamily: 'Montserrat-Regular',\n    color: 'black',\n    alignSelf: 'flex-end'\n  },\n  ownTime: {\n    fontSize: 14,\n    fontFamily: 'Montserrat-Regular',\n    color: 'black',\n    alignSelf: 'flex-start'\n  }\n});\nexport default MessageBody;","map":{"version":3,"names":["React","useState","useEffect","useContext","View","Text","StyleSheet","TouchableOpacity","ShowAvatar","ForwardSvg","ForwardFocusSvg","MessageContext","jsx","_jsx","jsxs","_jsxs","MessageBody","_ref","data","imageUrl","nickname","role","message","own","channel","_useState","_useState2","_slicedToArray","isFocused","setIsFocused","_useContext","forwardedMessages","addForwardedMessage","date","Date","time","toLocaleTimeString","hour","minute","handleForwardPress","prevState","updatedMessages","filter","msg","localStorage","setItem","JSON","stringify","storedMessages","getItem","parsedMessages","parse","includes","forwardIcon","style","styles","ownContainer","container","children","avatar","profile","messageBox","ownMessageBox","box","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","onPress","ownForward","forward","ownTime","create","flexDirection","alignItems","marginBottom","maxWidth","alignSelf","backgroundColor","paddingVertical","paddingHorizontal","borderTopLeftRadius","fontSize","fontFamily","fontWeight","color","flexWrap"],"sources":["C:/Users/ilias/OneDrive/Рабочий стол/messenger_project/Application/Client/components/messageBody/messageBody.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native-web';\r\nimport ShowAvatar from '../Avatar/ShowAvatar/showAvatar';\r\nimport ForwardSvg from '../../assets/icons/forwardSvg';\r\nimport ForwardFocusSvg from '../../assets/icons/forwardFocusSvg';\r\nimport { MessageContext } from '../context/MessageContext';\r\n\r\nconst MessageBody = ({ data }) => {\r\n  const { imageUrl, nickname, role, message, own, channel } = data;\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const { forwardedMessages, addForwardedMessage } = useContext(MessageContext);\r\n  const date = new Date();\r\n  const time = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n\r\n  const handleForwardPress = () => {\r\n    setIsFocused((prevState) => {\r\n      if (prevState) {\r\n        // Remove the message from forwarded messages\r\n        const updatedMessages = forwardedMessages.filter((msg) => msg !== message);\r\n        localStorage.setItem('forwardedMessages', JSON.stringify(updatedMessages));\r\n      } else {\r\n        // Add the message to forwarded messages\r\n        addForwardedMessage(message);\r\n      }\r\n      return !prevState;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Load forwarded messages from localStorage on component mount\r\n    const storedMessages = localStorage.getItem('forwardedMessages');\r\n    if (storedMessages) {\r\n      const parsedMessages = JSON.parse(storedMessages);\r\n      if (parsedMessages.includes(message)) {\r\n        setIsFocused(true);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const forwardIcon = isFocused ? <ForwardFocusSvg /> : <ForwardSvg />;\r\n\r\n  return (\r\n    <View style={own ? styles.ownContainer : styles.container}>\r\n      {!own && imageUrl && (\r\n        <View style={styles.avatar}>\r\n          <ShowAvatar imageUrl={imageUrl} profile={false} />\r\n        </View>\r\n      )}\r\n      <View\r\n        style={[\r\n          styles.messageBox,\r\n          own ? styles.ownMessageBox : styles.box,\r\n          {\r\n            borderTopRightRadius: own ? 10 : 10,\r\n            borderBottomRightRadius: own ? 0 : 10,\r\n            borderBottomLeftRadius: own ? 10 : 0,\r\n          },\r\n        ]}\r\n      >\r\n        <TouchableOpacity onPress={handleForwardPress}>\r\n          <View style={own ? styles.ownForward : styles.forward}>{forwardIcon}</View>\r\n        </TouchableOpacity>\r\n        <Text style={styles.nickname}>{nickname}</Text>\r\n        {channel && <Text style={styles.role}>{role}</Text>}\r\n        <Text style={styles.message}>{message}</Text>\r\n        <Text style={own ? styles.ownTime : styles.time}>{time}</Text>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexDirection: 'row',\r\n    alignItems: 'flex-end',\r\n    marginBottom: 10,\r\n    maxWidth: '100%',\r\n  },\r\n  ownContainer: {\r\n    flexDirection: 'row-reverse',\r\n    alignItems: 'flex-end',\r\n    marginBottom: 10,\r\n    maxWidth: '100%',\r\n  },\r\n  avatar: {\r\n    alignSelf: 'flex-start',\r\n    marginBottom: 0, // Remove marginBottom: 'auto'\r\n  },\r\n  messageBox: {\r\n    backgroundColor: '#E7DEDE',\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 15,\r\n    maxWidth: '60%',\r\n    marginBottom: 0, // Remove marginBottom: 13\r\n  },\r\n  box: {\r\n    borderTopRightRadius: 10,\r\n    borderBottomRightRadius: 10,\r\n    borderTopLeftRadius: 10,\r\n  },\r\n  ownMessageBox: {\r\n    backgroundColor: 'rgba(0, 118, 185, 0.35)',\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 15,\r\n    maxWidth: '60%',\r\n    borderTopRightRadius: 10,\r\n    borderBottomRightRadius: 10,\r\n    borderTopLeftRadius: 10,\r\n    marginBottom: 0, // Remove marginBottom: 13\r\n  },\r\n  forward: {\r\n    alignSelf: 'flex-end',\r\n    marginBottom: 5,\r\n  },\r\n  ownForward: {\r\n    alignSelf: 'flex-start',\r\n    marginBottom: 5,\r\n  },\r\n  nickname: {\r\n    fontSize: 24,\r\n    fontFamily: 'Montserrat-Bold',\r\n    fontWeight: 'bold',\r\n    color: 'black',\r\n    marginBottom: 5,\r\n  },\r\n  role: {\r\n    fontSize: 24,\r\n    fontFamily: 'Montserrat-Regular',\r\n    color: '#0076B9',\r\n    marginBottom: 5,\r\n  },\r\n  message: {\r\n    fontSize: 19,\r\n    fontFamily: 'Montserrat-Regular',\r\n    color: 'black',\r\n    flexWrap: 'wrap',\r\n    marginBottom: 5,\r\n  },\r\n  time: {\r\n    fontSize: 14,\r\n    fontFamily: 'Montserrat-Regular',\r\n    color: 'black',\r\n    alignSelf: 'flex-end',\r\n  },\r\n  ownTime: {\r\n    fontSize: 14,\r\n    fontFamily: 'Montserrat-Regular',\r\n    color: 'black',\r\n    alignSelf: 'flex-start',\r\n  },\r\n});\r\n\r\nexport default MessageBody;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}