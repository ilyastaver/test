{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useContext,useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import ShowAvatar from\"../Avatar/ShowAvatar/showAvatar\";import useStyles from\"./forwardMessage.module\";import AuthContext from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ForwardMessage=function ForwardMessage(_ref){var data=_ref.data;var imageUrl=data.imageUrl,nickname=data.nickname,message=data.message,own=data.own,from=data.from,id=data.id;var styles=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showDeleteButton=_useState2[0],setShowDeleteButton=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;var username='admin';var password='root';var handleDeletePress=function handleDeletePress(){var user_id=user.id;var message_id=id;fetch(\"https://messengerproject-production.up.railway.app/api/saved_message/delete?user_id=\"+user_id+\"&message_id=\"+message_id,{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':\"Basic \"+btoa(username+\":\"+password)}}).then(function(response){if(response.ok){window.location.reload();}else{console.log('Failed to delete message');}}).catch(function(error){console.log('Error deleting message:',error);});};var handleMessageBoxPress=function handleMessageBoxPress(){setShowDeleteButton(!showDeleteButton);};return _jsxs(View,{style:styles.container,children:[own?null:_jsx(ShowAvatar,{imageUrl:imageUrl,profile:false,style:styles.avatar}),_jsxs(TouchableOpacity,{style:[styles.messageBox,own&&styles.ownMessageBox],onPress:handleMessageBoxPress,children:[showDeleteButton&&_jsx(TouchableOpacity,{onPress:handleDeletePress,children:_jsx(Text,{style:{fontFamily:'Montserrat-Italic'},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})}),_jsx(Text,{style:[styles.nickname,own&&styles.ownNickname],children:nickname}),_jsx(Text,{style:[styles.message,own&&styles.ownMessage],children:message}),_jsxs(Text,{style:{fontFamily:'Montserrat-Italic'},children:[\"Forwarded from: \",from]})]})]});};export default ForwardMessage;","map":{"version":3,"names":["React","useContext","useState","View","Text","StyleSheet","TouchableOpacity","ShowAvatar","useStyles","AuthContext","jsx","_jsx","jsxs","_jsxs","ForwardMessage","_ref","data","imageUrl","nickname","message","own","from","id","styles","_useState","_useState2","_slicedToArray","showDeleteButton","setShowDeleteButton","_useContext","user","username","password","handleDeletePress","user_id","message_id","fetch","method","headers","btoa","then","response","ok","window","location","reload","console","log","catch","error","handleMessageBoxPress","style","container","children","profile","avatar","messageBox","ownMessageBox","onPress","fontFamily","ownNickname","ownMessage"],"sources":["C:/Users/ilias/OneDrive/Рабочий стол/messenger_project/Application/Client/components/forwardMessage/forwardMessage.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native-web';\r\nimport ShowAvatar from '../Avatar/ShowAvatar/showAvatar';\r\nimport useStyles from './forwardMessage.module';\r\nimport AuthContext from '../../context/AuthContext';\r\n\r\nconst ForwardMessage = ({ data }) => {\r\n  const { imageUrl, nickname, message, own, from, id } = data;\r\n  const styles = useStyles();\r\n  const [showDeleteButton, setShowDeleteButton] = useState(false);\r\n  const {user} = useContext(AuthContext);\r\n  const username = 'admin';\r\n  const password = 'root';\r\n  const handleDeletePress = () => {\r\n   \r\n    const user_id = user.id; \r\n    const message_id = id; \r\n\r\n    fetch(`https://messengerproject-production.up.railway.app/api/saved_message/delete?user_id=${user_id}&message_id=${message_id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Basic ${btoa(`${username}:${password}`)}`\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          // Delete request failed, handle accordingly\r\n          console.log('Failed to delete message');\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error deleting message:', error);\r\n      });\r\n  };\r\n\r\n  const handleMessageBoxPress = () => {\r\n    setShowDeleteButton(!showDeleteButton);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {own ? null : (\r\n        <ShowAvatar imageUrl={imageUrl} profile={false} style={styles.avatar} />\r\n      )}\r\n      <TouchableOpacity\r\n        style={[\r\n          styles.messageBox,\r\n          own && styles.ownMessageBox,\r\n        ]}\r\n        onPress={handleMessageBoxPress}\r\n      >\r\n        {showDeleteButton && (\r\n          <TouchableOpacity  onPress={handleDeletePress}>\r\n            <Text style={{ fontFamily: 'Montserrat-Italic' }}>Удалить</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n        <Text style={[styles.nickname, own && styles.ownNickname]}>\r\n          {nickname}\r\n        </Text>\r\n        <Text style={[styles.message, own && styles.ownMessage]}>{message}</Text>\r\n        <Text style={{ fontFamily: 'Montserrat-Italic' }}>\r\n          Forwarded from: {from}\r\n        </Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default ForwardMessage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}